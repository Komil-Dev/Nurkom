// Translations Object
const translations = {
    uz: {
        "nav-home": "Asosiy",
        "nav-services": "Xizmatlar", 
        "nav-about": "Statistika",
        "nav-portfolio": "Portfolio",
        "nav-contact": "Bog'lanish",
        "hero-modern": "Zamonaviy",
        "hero-digital": "Raqamli Yechimlar",
        "hero-description": "Professional veb-saytlar va Telegram botlar yaratish xizmati. Sizning biznesingiz uchun mukammal raqamli yechimlarga tayyormiz.",
        "hero-cta": "Biz bilan bog'laning",
        "services-title": "Xizmatlar",
        "service1-title": "Veb-sayt Yaratish",
        "service1-description": "Zamonaviy va funktsional veb-saytlar yaratish xizmati. Bizneslarga mos keladigan yechimlar.",
        "service2-title": "Telegram Bot Yaratish",
        "service2-description": "Biznesingiz uchun maxsus Telegram botlar yaratish. Mijozlar bilan muloqot va xizmatlarni avtomatlashtirish.",
        "service3-title": "Backend Ishlab Chiqish",
        "service3-description": "Loyihangiz uchun kuchli va barqaror backend tizimlar yaratish. Ma'lumotlar bazasi va API integratsiyasi.",
        "service-order": "Buyurtma berish",
        "portfolio-title": "Portfolio",
        "portfolio1-description": "Nurkom kompaniyasi uchun yaratilgan ushbu veb-sayt mijozlarga kompaniya haqida to'liq ma'lumot olish hamda bajarilgan loyihalar portfoliosi orqali tajribani ko'rish imkonini beradi.",
        "portfolio1-button": "Siz allaqachon saytdasiz",
        "portfolio-description":"Talabalarga konsalting xizmatlarini taqdim etuvchi platforma. Saytda o‘quv dasturlari, xorijiy universitetlar va grant imkoniyatlari haqida to‘liq ma’lumot beriladi.",
                "portfolio-description2":"Akademiya haqida ma'lumot beruvchi platforma. Mavjud kurslar karta ko'rinishida taqdim etiladi, har birida to'liq ma'lumot mavjud.",
        "portfolio2-description": "HMM Export kompaniyasi uchun yaratilgan ushbu veb-sayt mijozlarga mahsulotlar bilan tanishish, buyurtma berish, kompaniya haqida ma'lumot olish va yangiliklaridan xabardor bo'lish imkonini beradi.",
        "portfolio3-description": "Abdushukur Zamin Baraka firmasi uchun yaratilgan sayt foydalanuvchilarga quruq mevalar haqidagi ma'lumotlar, xizmatlar, qo'llab-quvvatlash imkoniyatlari va yangiliklarni taqdim etadi.",
        "portfolio4-description": "Wedday ilovasi uchun yaratilgan sayt foydalanuvchilarga ilova haqidagi ma'lumotlar, xizmatlar, qo'llab-quvvatlash imkoniyatlari va yangiliklarni taqdim etadi.",
        "portfolio5-description": "TCA Group kompaniyasi uchun yaratilgan ushbu veb-sayt kompaniya haqida batafsil ma'lumot olish, ishlab chiqarilgan ilovalar portfelini ko'rish va bog'lanish imkoniyatlarini taqdim etadi.",
        "portfolio6-description": "Bitiruvchi Lentalar kompaniyasi uchun yaratilgan ushbu veb-sayt mijozlarga mahsulotlar bilan tanishish, buyurtma berish va kompaniya haqida ma'lumot olish imkonini beradi.",
        "portfolio7-description": "Do'stlik Arena mini stadion boti orqali bugungi va ertangi o'yinlarni bron qilish, bekor qilish, stadion haqida ma'lumot olish, statistikani ko'rish mumkin va admin bilan bog'lanish imkoniyatini beradi.",
        "portfolio8-description": "Sodiq Consulting uchun yaratilgan sayt foydalanuvchilarga kompaniya haqidagi ma'lumotlar, ko'rsatiladigan xizmatlar, mijozlar uchun qo'llab-quvvatlash imkoniyatlari va sohadagi yangiliklarni taqdim etadi.",
        "portfolio-visit": "Saytga o'tish",
        "portfolio-bot": "Botga o'tish",
        "portfolio-official-bot": " Botga o'tish",
        "stat1": "Muvaffaqiyatli Loyihalar",
        "stat2": "Mijozlar Mamnuniyati",
        "stat3": "Tajribali Mutaxassislar", 
        "stat4": "Yillik Tajriba",
        "contact-title": "Bog'lanish",
        "contact-subtitle": "Biz bilan bog'laning",
        "contact-description": "Sizning loyihangiz bo'yicha maslahat olish yoki xizmatlarimiz haqida ko'proq ma'lumot olish uchun bizga murojaat qiling.",
        "contact-phone": "Telefon",
        "contact-address": "Manzil",
        "contact-form-title": "Xabar yuborish",
        "form-name": "Ismingiz",
        "form-phone": "Telefon raqamingiz",
        "form-telegram": "Telegram foydalanuvchi nomi",
        "form-message": "Xabar",
        "form-submit": "Yuborish",
        "footer-copyright": "© 2025 Nurkom. Barcha huquqlar himoyalangan.",
        "footer-text": "© 2025 Nurkom — Professional veb-saytlar va Telegram botlar yaratish xizmati.",
        "statistika":"Statistika"
    },
    en: {
        "nav-home": "Home",
        "nav-services": "Services",
        "nav-about": "Statistics",
        "nav-portfolio": "Portfolio",
        "nav-contact": "Contact",
        "hero-modern": "Modern",
        "hero-digital": "Digital Solutions",
        "hero-description": "Professional website and Telegram bot development services. We are ready to provide perfect digital solutions for your business.",
        "hero-cta": "Get in Touch",
        "services-title": "Services",
        "service1-title": "Website Development",
        "service1-description": "Modern and functional website development services. Solutions tailored for businesses.",
        "service2-title": "Telegram Bot Development",
        "service2-description": "Custom Telegram bot development for your business. Automate customer communication and services.",
        "service3-title": "Backend Development",
        "service3-description": "Creating powerful and stable backend systems for your project. Database and API integration.",
        "service-order": "Place Order",
        "portfolio-title": "Portfolio",
        "portfolio1-description": "This website created for Nurkom company allows clients to get complete information about the company and see experience through the portfolio of completed projects.",
        "portfolio1-button": "You are already on the site",
        "portfolio-description": "A platform providing consulting services to students. The website offers complete information about educational programs, foreign universities, and grant opportunities.",
        "portfolio-description2":"A platform providing information about the academy. Available courses are presented in card format, each containing complete information.",
        "portfolio2-description": "This website created for HMM Export company allows customers to get acquainted with products, place orders, get information about the company and stay updated with news.",
        "portfolio3-description": "The site created for Abdushukur Zamin Baraka company provides users with information about dried fruits, services, support opportunities and news.",
        "portfolio4-description": "The site created for Wedday application provides users with information about the app, services, support opportunities and news.",
        "portfolio5-description": "This website created for TCA Group company provides detailed information about the company, viewing the portfolio of developed applications and contact opportunities.",
        "portfolio6-description": "This website created for Bitiruvchi Lentalar company allows customers to get acquainted with products, place orders and get information about the company.",
        "portfolio7-description": "Through the Do'stlik Arena mini stadium bot, you can book today's and tomorrow's games, cancel, get information about the stadium, view statistics and contact the admin.",
        "portfolio8-description": "The site created for Sodiq Consulting provides users with information about the company, services provided, support opportunities for clients and industry news.",
        "portfolio-visit": "Visit Site",
        "portfolio-bot": "Go to Bot",
        "portfolio-official-bot": "Go to Bot",
        "stat1": "Successful Projects",
        "stat2": "Client Satisfaction",
        "stat3": "Experienced Specialists",
        "stat4": "Years Experience",
        "contact-title": "Contact",
        "contact-subtitle": "Get in Touch",
        "contact-description": "Contact us to get advice on your project or learn more about our services.",
        "contact-phone": "Phone",
        "contact-address": "Address",
        "contact-form-title": "Send Message",
        "form-name": "Your Name",
        "form-phone": "Your Phone Number",
        "form-telegram": "Telegram Username",
        "form-message": "Message",
        "form-submit": "Send",
        "footer-copyright": "© 2025 Nurkom. All rights reserved.",
        "footer-text": "© 2025 Nurkom — Professional website and Telegram bot development services.",
           "statistika":"Statistics"
    },
    ru: {
        "nav-home": "Главная",
        "nav-services": "Услуги", 
        "nav-about": "Cтатистика",
        "nav-portfolio": "Портфолио",
        "nav-contact": "Контакты",
        "hero-modern": "Современные",
        "hero-digital": "Цифровые Решения",
        "hero-description": "Профессиональная разработка веб-сайтов и Telegram ботов. Мы готовы предоставить идеальные цифровые решения для вашего бизнеса.",
        "hero-cta": "Связаться с нами",
        "services-title": "Услуги",
        "service1-title": "Разработка Веб-сайтов",
        "service1-description": "Услуги по созданию современных и функциональных веб-сайтов. Решения, подходящие для бизнеса.",
        "service2-title": "Разработка Telegram Ботов",
        "service2-description": "Создание специальных Telegram ботов для вашего бизнеса. Автоматизация общения с клиентами и услуг.",
        "service3-title": "Backend Разработка",
        "service3-description": "Создание мощных и стабильных backend систем для вашего проекта. Интеграция баз данных и API.",
        "service-order": "Заказать",
        "portfolio-title": "Портфолио",
        "portfolio1-description": "Этот веб-сайт, созданный для компании Nurkom, позволяет клиентам получить полную информацию о компании и увидеть опыт через портфолио выполненных проектов.",
        "portfolio1-button": "Вы уже на сайте",
        "portfolio-description":"Платформа, предоставляющая консультационные услуги студентам. На сайте представлена полная информация об образовательных программах, зарубежных университетах и грантовых возможностях.",
                "portfolio-description2":"Платформа, предоставляющая информацию об академии. Доступные курсы представлены в виде карточек, каждая из которых содержит полную информацию.",

        "portfolio2-description": "Этот веб-сайт, созданный для компании HMM Export, позволяет клиентам ознакомиться с продуктами, размещать заказы, получать информацию о компании и быть в курсе новостей.",
        "portfolio3-description": "Сайт, созданный для компании Abdushukur Zamin Baraka, предоставляет пользователям информацию о сухофруктах, услугах, возможностях поддержки и новостях.",
        "portfolio4-description": "Сайт, созданный для приложения Wedday, предоставляет пользователям информацию о приложении, услугах, возможностях поддержки и новостях.",
        "portfolio5-description": "Этот веб-сайт, созданный для компании TCA Group, предоставляет подробную информацию о компании, просмотр портфолио разработанных приложений и возможности связи.",
        "portfolio6-description": "Этот веб-сайт, созданный для компании Bitiruvchi Lentalar, позволяет клиентам ознакомиться с продуктами, размещать заказы и получать информацию о компании.",
        "portfolio7-description": "Через бот мини-стадиона Do'stlik Arena можно бронировать сегодняшние и завтрашние игры, отменять, получать информацию о стадионе, просматривать статистику и связываться с администратором.",
        "portfolio8-description": "Сайт, созданный для Sodiq Consulting, предоставляет пользователям информацию о компании, предоставляемых услугах, возможностях поддержки клиентов и новостях отрасли.",
        "portfolio-visit": "Посетить сайт",
        "portfolio-bot": "Перейти к боту",
        "portfolio-official-bot": "Перейти к  боту",
        "stat1": "Успешных Проектов",
        "stat2": "Удовлетворенность Клиентов",
        "stat3": "Опытных Специалистов",
        "stat4": "Лет Опыта",
        "contact-title": "Контакты",
        "contact-subtitle": "Свяжитесь с нами",
        "contact-description": "Свяжитесь с нами, чтобы получить консультацию по вашему проекту или узнать больше о наших услугах.",
        "contact-phone": "Телефон",
        "contact-address": "Адрес",
        "contact-form-title": "Отправить сообщение",
        "form-name": "Ваше имя",
        "form-phone": "Ваш номер телефона",
        "form-telegram": "Имя пользователя Telegram",
        "form-message": "Сообщение",
        "form-submit": "Отправить",
        "footer-copyright": "© 2025 Nurkom. Все права защищены.",
        "footer-text": "© 2025 Nurkom — Профессиональная разработка веб-сайтов и Telegram ботов.",
           "statistika":"Cтатистика"
    }
};

// Current language state
let currentLang = localStorage.getItem('language') || 'uz';

// Language switcher functionality
function initLanguageSwitcher() {
    const langBtn = document.getElementById('language-btn');
    const mobileLangBtn = document.getElementById('mobile-language-btn');
    const langDropdown = document.getElementById('language-dropdown');
    const mobileLangDropdown = document.getElementById('mobile-language-dropdown');
    const currentFlag = document.getElementById('current-flag');
    const mobileCurrentFlag = document.getElementById('mobile-current-flag');
    const currentLangText = document.getElementById('current-lang');
    const mobileCurrentLangText = document.getElementById('mobile-current-lang');

    // Update flag and text based on current language
    function updateLanguageDisplay() {
        const flagClass = `flag-${currentLang}`;
        currentFlag.className = `language-flag ${flagClass}`;
        mobileCurrentFlag.className = `language-flag ${flagClass} w-4 h-3`;
        currentLangText.textContent = currentLang.toUpperCase();
        mobileCurrentLangText.textContent = currentLang.toUpperCase();

        // Update active state in dropdowns
        document.querySelectorAll('.language-option').forEach(option => {
            option.classList.toggle('active', option.dataset.lang === currentLang);
        });
    }

    // Toggle dropdown visibility
    function toggleDropdown(dropdown) {
        dropdown.classList.toggle('show');
    }

    // Close dropdown
    function closeDropdown(dropdown) {
        dropdown.classList.remove('show');
    }

    // Event listeners for desktop
    langBtn.addEventListener('click', (e) => {
        e.stopPropagation();
        toggleDropdown(langDropdown);
        closeDropdown(mobileLangDropdown);
    });

    // Event listeners for mobile
    mobileLangBtn.addEventListener('click', (e) => {
        e.stopPropagation();
        toggleDropdown(mobileLangDropdown);
        closeDropdown(langDropdown);
    });

    // Language option click handlers
    document.querySelectorAll('.language-option').forEach(option => {
        option.addEventListener('click', (e) => {
            e.preventDefault();
            const newLang = option.dataset.lang;
            if (newLang !== currentLang) {
                changeLanguage(newLang);
            }
            closeDropdown(langDropdown);
            closeDropdown(mobileLangDropdown);
        });
    });

    // Close dropdowns when clicking outside
    document.addEventListener('click', () => {
        closeDropdown(langDropdown);
        closeDropdown(mobileLangDropdown);
    });

    // Prevent dropdown from closing when clicking inside
    langDropdown.addEventListener('click', (e) => e.stopPropagation());
    mobileLangDropdown.addEventListener('click', (e) => e.stopPropagation());

    updateLanguageDisplay();
}

// Change language function
function changeLanguage(lang) {
    currentLang = lang;
    localStorage.setItem('language', lang);
    
    // Update HTML lang attribute
    document.documentElement.lang = lang;
    
    // Update all translatable elements
    document.querySelectorAll('[data-key]').forEach(element => {
        const key = element.getAttribute('data-key');
        if (translations[lang] && translations[lang][key]) {
            element.textContent = translations[lang][key];
        }
    });

    // Update language display
    const currentFlag = document.getElementById('current-flag');
    const mobileCurrentFlag = document.getElementById('mobile-current-flag');
    const currentLangText = document.getElementById('current-lang');
    const mobileCurrentLangText = document.getElementById('mobile-current-lang');

    const flagClass = `flag-${lang}`;
    currentFlag.className = `language-flag ${flagClass}`;
    mobileCurrentFlag.className = `language-flag ${flagClass} w-4 h-3`;
    currentLangText.textContent = lang.toUpperCase();
    mobileCurrentLangText.textContent = lang.toUpperCase();

    // Update active state
    document.querySelectorAll('.language-option').forEach(option => {
        option.classList.toggle('active', option.dataset.lang === lang);
    });

    // Update form placeholders
    updateFormPlaceholders(lang);
}

// Update form placeholders
function updateFormPlaceholders(lang) {
    const telegramInput = document.getElementById('telegram');
    if (telegramInput) {
        const placeholders = {
            uz: '@username',
            en: '@username', 
            ru: '@username'
        };
        telegramInput.placeholder = placeholders[lang] || '@username';
    }
}

// Mobile menu functionality
function initMobileMenu() {
    const mobileMenuButton = document.getElementById('mobile-menu-button');
    const closeMenuButton = document.getElementById('close-menu-button');
    const mobileMenu = document.getElementById('mobile-menu');
    const menuOverlay = document.getElementById('menu-overlay');
    const mobileMenuItems = document.querySelectorAll('.mobile-menu-item');

    function openMobileMenu() {
        mobileMenu.classList.remove('translate-x-full');
        menuOverlay.classList.remove('hidden');
        document.body.style.overflow = 'hidden';

        document.querySelectorAll('.mobile-menu-item').forEach((item, index) => {
            setTimeout(() => {
                item.classList.add('mobile-menu-enter');
            }, 100 + (index * 50));
        });
    }

    function closeMobileMenu() {
        mobileMenu.classList.add('translate-x-full');

        document.querySelectorAll('.mobile-menu-item').forEach(item => {
            item.classList.remove('mobile-menu-enter');
        });

        setTimeout(() => {
            menuOverlay.classList.add('hidden');
            document.body.style.overflow = '';
        }, 500);
    }

    mobileMenuButton.addEventListener('click', openMobileMenu);
    closeMenuButton.addEventListener('click', closeMobileMenu);
    menuOverlay.addEventListener('click', closeMobileMenu);

    mobileMenuItems.forEach(item => {
        item.addEventListener('click', closeMobileMenu);
    });

    document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') closeMobileMenu();
    });
}

// Scroll effects
function initScrollEffects() {
    let lastScrollTop = 0;
    const header = document.querySelector('header');

    window.addEventListener('scroll', () => {
        const scrollTop = window.pageYOffset || document.documentElement.scrollTop;

        if (scrollTop > lastScrollTop && scrollTop > 100) {
            header.classList.add('shadow-xl');
        } else {
            header.classList.remove('shadow-xl');
        }

        lastScrollTop = scrollTop;
    });
}

// Smooth scrolling for navigation links
function initSmoothScrolling() {
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                target.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            }
        });
    });
}

// Initialize all functionality when DOM is loaded
document.addEventListener('DOMContentLoaded', function() {
    // Set initial language
    changeLanguage(currentLang);
    initLanguageSwitcher();
    
    // Initialize other functionality
    initMobileMenu();
    initContactForm();
    initScrollEffects();
    initSmoothScrolling();
    
    // Initialize animations
    initAnimations();
});

// Animation initialization
function initAnimations() {
    // Intersection Observer for fade-up animations
    const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
    };

    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.style.animationPlayState = 'running';
            }
        });
    }, observerOptions);

    // Observe all fade-up elements
    document.querySelectorAll('.fade-up').forEach(el => {
        observer.observe(el);
    });
}

// Utility function to handle loading states
function showLoading(element, text = 'Loading...') {
    const originalContent = element.innerHTML;
    element.innerHTML = `
        <div class="flex items-center justify-center">
            <div class="animate-spin rounded-full h-4 w-4 border-b-2 border-[#00ffaa] mr-2"></div>
            ${text}
        </div>
    `;
    return originalContent;
}

// Error handling for network requests
function handleNetworkError(error) {
    console.error('Network error:', error);
    return {
        success: false,
        message: 'Network connection failed. Please check your internet connection and try again.'
    };
}



